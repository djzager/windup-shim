testDataPath: ../../windup/windup-rulesets/rules/rules-reviewed/eap7/eap71/tests/data/data-hibernate51-53
rulePath:
- ../hibernate51-53.windup.xml
- ../hibernate51-53.windup.groovy
ruleset:
- rules:
    rule:
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionImplementor` parameter has
                to be changed to `org.hibernate.engine.spi.SharedSessionContractImplementor`*'
            size: 29
      perform:
        fail:
        - message: SessionImplementor hint not found.
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: change reference to hibernate-java8 to hibernate-core
            size: 2
      perform:
        fail:
        - message: No reference to hibernate-java8 found in pom.xml (where hibernate-core
            not also referenced)
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: If the `SessionFactory` is built via Hibernateâ€™s native bootstrapping
                and `org.hibernate.HibernateException`*
            size: 1
      perform:
        fail:
        - message: References to org.hibernate.HibernateException or subclasses not
            found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getDefaultQueryResultsCache\(\)`
                should be used instead of `SessionFactoryImplementor.getQueryCache\(\)`
                method*'
            size: 1
      perform:
        fail:
        - message: Hint removed method getQueryCache() not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getDefaultQueryResultsCache\(String
                regionName\)` should be used instead of `SessionFactoryImplementor.getQueryCache\(String
                regionName\)` method'
            size: 1
      perform:
        fail:
        - message: Hint removed method getQueryCache(String regionName) not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getTimestampsCache\(\)`
                should be used instead of `SessionFactoryImplementor.getUpdateTimestampsCache\(\)`
                method'
            size: 1
      perform:
        fail:
        - message: Hint removed method getUpdateTimestampsCache() not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getRegion\(String
                regionName\)` should be used instead of `SessionFactoryImplementor.getSecondLevelCacheRegion\(String
                regionName\)` method'
            size: 1
      perform:
        fail:
        - message: Hint removed method getSecondLevelCacheRegion(String regionName)
            not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: Depending on the type of region, the appropriate method should
                be used instead.*
            size: 1
      perform:
        fail:
        - message: Hint removed method getSecondLevelCacheRegionAccessStrategy(String
            regionName) not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getRegion\(String
                regionName\)` should be used instead of `SessionFactoryImplementor.getNaturalIdCacheRegion\(String
                regionName\)` method'
            size: 1
      perform:
        fail:
        - message: Hint removed method getNaturalIdCacheRegion(String regionName)
            not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getMetamodel\(\).entityPersister\(
                entityName \).getNaturalIdCacheAccessStrategy\(\)` should be used
                instead of `SessionFactoryImplementor.getNaturalIdCacheRegionAccessStrategy\(String
                regionName\)` method'
            size: 1
      perform:
        fail:
        - message: Hint removed method getNaturalIdCacheRegionAccessStrategy(String
            regionName) not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: '`org.hibernate.engine.spi.SessionFactoryImplementor.getCache\(\).getCacheRegionNames\(\)`
                should be used to obtain all cache region names.*'
            size: 1
      perform:
        fail:
        - message: Hint removed method getAllSecondLevelCacheRegions() not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: Review usage of classes in `org.hibernate.cache.spi.RegionFactory`
            size: 10
      perform:
        fail:
        - message: RegionFactory references not flagged as required
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: One potential upgrade concern is any custom `org.hibernate.cache.spi.QueryCacheFactory`
                implementations*
            size: 1
      perform:
        fail:
        - message: Removed interface QueryCacheFactory not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: A change to be aware of is accessing cache entries via `SecondLevelCacheStatistics.getEntries\(\)`
                and `NaturalIdCacheStatistics.getEntries\(\)`*
            size: 2
      perform:
        fail:
        - message: Hint deprecated methods SecondLevelCacheStatistics.getEntries and
            NaturalIdCacheStatistics.getEntries not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: A change to be aware of is accessing cache entries via `NaturalIdCacheStatistics.getEntries\(\)`*
            size: 1
      perform:
        fail:
        - message: Hint deprecated method NaturalIdCacheStatistics.getEntries not
            found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: A change to be aware of is accessing cache entries via `SecondLevelCacheStatistics.getEntries\(\)`\.
            size: 1
      perform:
        fail:
        - message: Hint deprecated method SecondLevelCacheStatistics.getEntries not
            found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: The SPIs in the `org.hibernate*
            size: 11
      perform:
        fail:
        - message: Hint package org.hibernate.(persister|tuple) changed not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: Define `hibernate.default_schema` or `hibernate.default_catalog`
            size: 1
      perform:
        fail:
        - message: No default_schema or default_catalog found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: If the application uses Hibernate, please define `hibernate.default_schema`
                or `hibernate.default_catalog`
            size: 2
      perform:
        fail:
        - message: No default_schema or default_catalog found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: Applications using the `@TableGenerator` should set
            size: 1
      perform:
        fail:
        - message: TableGenerator class not found
    - when:
        not:
        - iterable-filter:
          - hint-exists:
            - message: Any references to `org.hibernate.*.getType().*
            size: 2
      perform:
        fail:
        - message: Deprecated method org.hibernate.className.getType() not found
  sourceFile: ""
sourceFile: http://github.com/windup/windup-ruletests/tree/master/rules/rules-reviewed/eap7/eap71/tests/hibernate51-53.windup.test.xml
