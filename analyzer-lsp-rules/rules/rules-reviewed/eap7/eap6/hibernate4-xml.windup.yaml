- rules:
  - message: "\n                        Replace configuration transaction property
      `hibernate.transaction.factory_class`\n                        with `hibernate.transaction.coordinator_class`.\n\n
      \                       Next the contract in `hibernate.transaction.coordinator_class`
      property should refer to `org.hibernate.resource.transaction.TransactionCoordinatorBuilder`\n
      \                       instead of to `org.hibernate.engine.transaction.spi.TransactionFactory`\n\n
      \                       If a JPA application does not provide a setting for
      `hibernate.transaction.coordinator_class`, Hibernate will automatically build
      the proper transaction coordinator based on the transaction type for the persistence
      unit.\n\n                        If a non-JPA application does not provide a
      setting for `hibernate.transaction.coordinator_class`, Hibernate will use jdbc
      as the default. This default will cause problems if the application actually
      uses JTA-based transactions. A non-JPA application that uses JTA-based transactions
      should explicitly set `hibernate.transaction.coordinator_class=jta` or provide
      a custom `org.hibernate.resource.transaction.TransactionCoordinatorBuilder`
      that builds a `org.hibernate.resource.transaction.TransactionCoordinator` that
      properly coordinates with JTA-based transactions.\n                        "
    ruleID: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4-xml.windup.xml-0
    when:
    - filecontent:
        filename: hibernate.{file-ext}
        pattern: hibernate.transaction.factory_class
  - message: Use `org.hibernate.id.enhanced.SequenceStyleGenerator` instead.
    ruleID: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4-xml.windup.xml-1
    when:
    - filecontent:
        filename: '{*}.hbm.xml'
        pattern: org.hibernate.id.{idclass}
  - message: Identifier generator {generator} was removed/deprecated in Hibernate
      5. You can use `sequence` generator instead.
    ruleID: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4-xml.windup.xml-2
    when:
    - xmlfile: null
  - ruleID: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4-xml.windup.xml-3
    when:
    - or:
      - as: properties
        filecontent:
          filename: hibernate.properties
          pattern: hibernate.hql.bulk_id_strategy=org.hibernate.hql.spi.TemporaryTableBulkIdStrategy
      - xmlfile: null
  - ruleID: http://github.com/windup/windup-rulesets/tree/master/rules/rules-reviewed/eap7/eap6/hibernate4-xml.windup.xml-4
    when:
    - or:
      - as: properties
        filecontent:
          filename: hibernate.properties
          pattern: hibernate.hql.bulk_id_strategy=org.hibernate.hql.spi.PersistentTableBulkIdStrategy
      - xmlfile: null
